(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["table"],{"2bab":function(t,e,i){},"36b3":function(t,e,i){"use strict";var a=i("2bab"),s=i.n(a);s.a},"3fca":function(t,e,i){"use strict";var a=i("d80d"),s=i.n(a);s.a},8284:function(t,e,i){},"8c93":function(t,e,i){var a;
/*!
 * sChart JavaScript Library v2.0.1
 * http://blog.gdfengshuo.com/example/sChart/ | Released under the MIT license
 * Date: 2018-04-16T18:59Z
 */(function(s,n){a=function(){return n(s)}.call(e,i,e,t),void 0===a||(t.exports=a)})(this,(function(t){"use strict";function e(t,e,i,a){this.canvas=document.getElementById(t),this.ctx=this.canvas.getContext("2d"),this.dpi=window.devicePixelRatio||1,this.type=e,this.data=i,this.dataLength=this.data.length,this.showValue=!0,this.autoWidth=!1,this.width=this.canvas.width*this.dpi,this.height=this.canvas.height*this.dpi,this.topPadding=50*this.dpi,this.leftPadding=50*this.dpi,this.rightPadding=0*this.dpi,this.bottomPadding=50*this.dpi,this.yEqual=5,this.yLength=0,this.xLength=0,this.yFictitious=0,this.yRatio=0,this.bgColor="#ffffff",this.fillColor="#1E9FFF",this.axisColor="#666666",this.contentColor="#eeeeee",this.titleColor="#000000",this.title="",this.titlePosition="top",this.radius=100*this.dpi,this.innerRadius=70*this.dpi,this.colorList=["#1E9FFF","#13CE66","#F7BA2A","#FF4949","#72f6ff","#199475","#e08031","#726dd1"],this.legendColor="#000000",this.legendTop=40*this.dpi,this.totalValue=this.getTotalValue(),this.init(a)}return e.prototype={init:function(t){if(0===this.dataLength)return!1;if(t){var e=["topPadding","leftPadding","rightPadding","bottomPadding","radius","innerRadius","legendTop"];for(var i in t)"colorList"===i&&Array.isArray(t[i])?this[i]=t[i].concat(this[i]):e.indexOf(i)>-1?this[i]=t[i]*this.dpi:this[i]=t[i]}t.autoWidth?(this.width=this.canvas.width=this.canvas.parentNode.offsetWidth*this.dpi,this.height=this.canvas.height=this.canvas.parentNode.offsetHeight*this.dpi,this.canvas.setAttribute("style","width:"+this.canvas.parentNode.offsetWidth+"px;height:"+this.canvas.parentNode.offsetHeight+"px;")):(this.canvas.setAttribute("style","width:"+this.canvas.width+"px;height:"+this.canvas.height+"px;"),this.canvas.width*=this.dpi,this.canvas.height*=this.dpi),"bar"===this.type||"line"===this.type?(this.yLength=Math.floor((this.height-this.topPadding-this.bottomPadding-10)/this.yEqual),this.xLength=Math.floor((this.width-this.leftPadding-this.rightPadding-10)/this.dataLength),this.yFictitious=this.getYFictitious(this.data),this.yRatio=this.yLength/this.yFictitious,this.drawBarUpdate()):this.drawPieUpdate()},drawBarUpdate:function(){this.ctx.fillStyle=this.bgColor,this.ctx.fillRect(0,0,this.width,this.height),this.drawAxis(),this.drawPoint(),this.drawTitle(),this.drawBarChart()},drawPieUpdate:function(){this.ctx.fillStyle=this.bgColor,this.ctx.fillRect(0,0,this.width,this.height),this.drawLegend(),this.drawTitle(),this.drawPieChart()},drawBarChart:function(){this.ctx.fillStyle=this.fillColor,this.ctx.strokeStyle=this.fillColor;for(var t=0;t<this.dataLength;t++)this.data[t].left=this.leftPadding+this.xLength*(t+.25),this.data[t].top=this.height-this.bottomPadding-this.data[t].value*this.yRatio,this.data[t].right=this.leftPadding+this.xLength*(t+.75),this.data[t].bottom=this.height-this.bottomPadding,"line"===this.type?(this.ctx.beginPath(),this.ctx.arc(this.data[t].left+this.xLength/4,this.data[t].top,2,0,2*Math.PI,!0),this.ctx.fill(),0!==t&&(this.ctx.moveTo(this.data[t].left+this.xLength/4,this.data[t].top),this.ctx.lineTo(this.data[t-1].left+this.xLength/4,this.data[t-1].top)),this.ctx.stroke()):"bar"===this.type&&this.ctx.fillRect(this.data[t].left,this.data[t].top,this.data[t].right-this.data[t].left,this.data[t].bottom-this.data[t].top),this.showValue&&(this.ctx.font=12*this.dpi+"px Arial",this.ctx.fillText(this.data[t].value,this.data[t].left+this.xLength/4,this.data[t].top-5))},drawPieChart:function(){for(var t=this.width/2,e=this.height/2,i=0,a=0,s=0;s<this.dataLength;s++)this.ctx.beginPath(),this.ctx.fillStyle=this.colorList[s],this.ctx.moveTo(t,e),this.data[s].start=0===s?-Math.PI/2:this.data[s-1].end,this.data[s].end=this.data[s].start+this.data[s].value/this.totalValue*2*Math.PI,this.ctx.arc(t,e,this.radius,this.data[s].start,this.data[s].end),this.ctx.closePath(),this.ctx.fill(),this.data[s].middle=(this.data[s].start+this.data[s].end)/2,i=Math.ceil(Math.abs(this.radius*Math.cos(this.data[s].middle))),a=Math.floor(Math.abs(this.radius*Math.sin(this.data[s].middle))),this.ctx.strokeStyle=this.colorList[s],this.showValue&&(this.data[s].middle<=0?(this.ctx.textAlign="left",this.ctx.moveTo(t+i,e-a),this.ctx.lineTo(t+i+10,e-a-10),this.ctx.moveTo(t+i+10,e-a-10),this.ctx.lineTo(t+i+this.radius/2,e-a-10),this.ctx.stroke(),this.ctx.fillText(this.data[s].value,t+i+5+this.radius/2,e-a-5)):this.data[s].middle>0&&this.data[s].middle<=Math.PI/2?(this.ctx.textAlign="left",this.ctx.moveTo(t+i,e+a),this.ctx.lineTo(t+i+10,e+a+10),this.ctx.moveTo(t+i+10,e+a+10),this.ctx.lineTo(t+i+this.radius/2,e+a+10),this.ctx.stroke(),this.ctx.fillText(this.data[s].value,t+i+5+this.radius/2,e+a+15)):this.data[s].middle>Math.PI/2&&this.data[s].middle<Math.PI?(this.ctx.textAlign="right",this.ctx.moveTo(t-i,e+a),this.ctx.lineTo(t-i-10,e+a+10),this.ctx.moveTo(t-i-10,e+a+10),this.ctx.lineTo(t-i-this.radius/2,e+a+10),this.ctx.stroke(),this.ctx.fillText(this.data[s].value,t-i-5-this.radius/2,e+a+15)):(this.ctx.textAlign="right",this.ctx.moveTo(t-i,e-a),this.ctx.lineTo(t-i-10,e-a-10),this.ctx.moveTo(t-i-10,e-a-10),this.ctx.lineTo(t-i-this.radius/2,e-a-10),this.ctx.stroke(),this.ctx.fillText(this.data[s].value,t-i-5-this.radius/2,e-a-5)));"ring"===this.type&&(this.ctx.beginPath(),this.ctx.fillStyle=this.bgColor,this.ctx.arc(t,e,this.innerRadius,0,2*Math.PI),this.ctx.fill())},drawAxis:function(){this.ctx.beginPath(),this.ctx.strokeStyle=this.axisColor,this.ctx.moveTo(this.leftPadding+.5,this.height-this.bottomPadding+.5),this.ctx.lineTo(this.leftPadding+.5,this.topPadding+.5),this.ctx.moveTo(this.leftPadding+.5,this.height-this.bottomPadding+.5),this.ctx.lineTo(this.width-this.rightPadding-.5,this.height-this.bottomPadding+.5),this.ctx.stroke()},drawPoint:function(){this.ctx.beginPath(),this.ctx.font=12*this.dpi+"px Microsoft YaHei",this.ctx.textAlign="center",this.ctx.fillStyle=this.axisColor;for(var t=0;t<this.dataLength;t++){var e=this.data[t].name,i=this.xLength*(t+1);this.ctx.moveTo(this.leftPadding+i+.5,this.height-this.bottomPadding+.5),this.ctx.lineTo(this.leftPadding+i+.5,this.height-this.bottomPadding+5.5),this.ctx.fillText(e,this.leftPadding+i-this.xLength/2,this.height-this.bottomPadding+15*this.dpi)}this.ctx.stroke(),this.ctx.beginPath(),this.ctx.font=12*this.dpi+"px Microsoft YaHei",this.ctx.textAlign="right",this.ctx.fillStyle=this.axisColor,this.ctx.moveTo(this.leftPadding+.5,this.height-this.bottomPadding+.5),this.ctx.lineTo(this.leftPadding-4.5,this.height-this.bottomPadding+.5),this.ctx.fillText(0,this.leftPadding-10,this.height-this.bottomPadding+5);for(t=0;t<this.yEqual;t++){var a=this.yFictitious*(t+1),s=this.yLength*(t+1);this.ctx.beginPath(),this.ctx.strokeStyle=this.axisColor,this.ctx.moveTo(this.leftPadding+.5,this.height-this.bottomPadding-s+.5),this.ctx.lineTo(this.leftPadding-4.5,this.height-this.bottomPadding-s+.5),this.ctx.stroke(),this.ctx.fillText(a,this.leftPadding-10,this.height-this.bottomPadding-s+5),this.ctx.beginPath(),this.ctx.strokeStyle=this.contentColor,this.ctx.moveTo(this.leftPadding+.5,this.height-this.bottomPadding-s+.5),this.ctx.lineTo(this.width-this.rightPadding-.5,this.height-this.bottomPadding-s+.5),this.ctx.stroke()}},drawTitle:function(){this.title&&(this.ctx.beginPath(),this.ctx.textAlign="center",this.ctx.fillStyle=this.titleColor,this.ctx.font=16*this.dpi+"px Microsoft YaHei","bottom"===this.titlePosition&&this.bottomPadding>=40?this.ctx.fillText(this.title,this.width/2,this.height-5):this.ctx.fillText(this.title,this.width/2,this.topPadding/2+5))},drawLegend:function(){for(var t=0;t<this.dataLength;t++)this.ctx.fillStyle=this.colorList[t],this.ctx.fillRect(10,this.legendTop+15*t*this.dpi,20,11),this.ctx.fillStyle=this.legendColor,this.ctx.font=12*this.dpi+"px Microsoft YaHei",this.ctx.textAlign="left",this.ctx.fillText(this.data[t].name,35,this.legendTop+10+15*t*this.dpi)},getYFictitious:function(t){var e=t.slice(0);e.sort((function(t,e){return-(t.value-e.value)}));var i=Math.ceil(e[0].value/this.yEqual),a=i.toString().length-1;return a=a>2?2:a,Math.ceil(i/Math.pow(10,a))*Math.pow(10,a)},getTotalValue:function(){for(var t=0,e=0;e<this.dataLength;e++)t+=this.data[e].value;return t}},e}))},a258:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"crumbs"},[i("el-breadcrumb",{attrs:{separator:"/"}},[i("el-breadcrumb-item",[i("i",{staticClass:"el-icon-lx-cascades"}),t._v(" 小说列表\n            ")])],1)],1),i("div",{staticClass:"container"},[i("div",{staticClass:"handle-box"},[i("el-button",{staticClass:"mr10",attrs:{type:"primary",icon:"el-icon-refresh"},on:{click:t.refresh}},[t._v("刷新")]),i("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"书名或作者名"},model:{value:t.findStr,callback:function(e){t.findStr=e},expression:"findStr"}}),i("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.handleSearch}},[t._v("搜索")])],1),i("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:t.book,border:"","header-cell-class-name":"table-header"}},[i("el-table-column",{attrs:{prop:"id",label:"ID",width:"100",align:"center"}}),i("el-table-column",{attrs:{prop:"name",label:"书名"}}),i("el-table-column",{attrs:{prop:"author.name",label:"作者"}}),i("el-table-column",{attrs:{prop:"createTime",label:"爬取时间"}}),i("el-table-column",{attrs:{label:"操作",width:"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{staticClass:"green",attrs:{type:"text",icon:"el-icon-lx-sort"},on:{click:function(i){return t.handleEdit(e.$index,e.row)}}},[t._v("详情")]),i("el-button",{staticClass:"red",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(i){return t.handleDelete(e.$index,e.row)}}},[t._v("删除")])]}}])})],1),i("div",{staticClass:"pagination"},[i("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next","current-page":t.query_book.index,"page-size":t.query_book.size,total:t.totalElements},on:{"update:currentPage":function(e){return t.$set(t.query_book,"index",e)},"update:current-page":function(e){return t.$set(t.query_book,"index",e)},"current-change":t.getData}})],1)],1),i("el-dialog",{attrs:{title:"章节列表",visible:t.editVisible,width:"50%"},on:{"update:visible":function(e){t.editVisible=e}}},[i("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:t.chapter.content,border:"","header-cell-class-name":"table-header"}},[i("el-table-column",{attrs:{prop:"id",label:"ID",width:"100",align:"center"}}),i("el-table-column",{attrs:{prop:"title",label:"标题"}}),i("el-table-column",{attrs:{prop:"createTime",label:"爬取时间"}})],1),i("p",{staticClass:"visit"},[t._v("\n            阅读量："+t._s(t.visit)+"\n            "),i("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:t.handleVisit}},[t._v("详情")])],1),i("div",{staticClass:"pagination"},[i("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next","current-page":t.query.index,"page-size":t.query.size,total:t.chapter.totalElements},on:{"update:currentPage":function(e){return t.$set(t.query,"index",e)},"update:current-page":function(e){return t.$set(t.query,"index",e)},"current-change":t.handlePageChange}})],1)],1),i("el-dialog",{attrs:{title:"阅读量统计",visible:t.visitVisible,width:"50%"},on:{"update:visible":function(e){t.visitVisible=e},close:t.handleVisitClose}},[t.visitVisible?i("chart",{attrs:{id:t.now_id}}):t._e()],1)],1)},s=[],n=(i("7f7f"),i("d862")),o={name:"novelList",components:{chart:n["a"]},data:function(){return{query:{bookId:0,index:1,size:5},chapter:{content:[],totalElements:0,totalPages:0},book:[],editVisible:!1,visitVisible:!1,now_id:null,findStr:"",form:{},visit:0,query_book:{name:"",index:1,size:10},totalPages:0,totalElements:0}},created:function(){this.getData()},methods:{getData:function(){var t=this,e={name:this.query_book.name,index:this.query_book.index-1,size:this.query_book.size};this.$axios.get("/book",e).then((function(e){var i=e.data;t.book=i.content,t.totalElements=i.totalElements}))},refresh:function(){var t=this,e={name:this.query_book.name,index:this.query_book.index-1,size:this.query_book.size};this.$axios.get("/book",e).then((function(e){var i=e.data;t.book=i.content,t.totalElements=i.totalElements,t.$message.success("刷新成功！")}))},handleSearch:function(){this.query_book.index=1,this.query_book.name=this.findStr,this.getData()},handleDelete:function(t,e){var i=this;this.$confirm("确定要删除吗？","提示",{type:"warning"}).then((function(){i.$axios.delete("/admin/book?id="+e.id).then((function(t){i.$message.success("删除成功"),i.getData()})).catch((function(t){i.$message.error("删除失败")}))})).catch((function(){}))},handleEdit:function(t,e){this.query.index=1,this.form=e,this.editVisible=!0,this.getChapter(e.id),this.getVisit(e.id),this.now_id=e.id},handleVisit:function(){this.editVisible=!1,this.visitVisible=!0},handleVisitClose:function(){this.editVisible=!0},getVisit:function(t){var e=this;this.$axios.get("/visit?bookId="+t).then((function(t){e.visit=t.data}))},getChapter:function(t){var e=this;t&&(this.query.bookId=t);var i={bookId:this.query.bookId,index:this.query.index-1,size:this.query.size};this.$axios.get("/chapter",i).then((function(t){e.chapter=t.data}))},handlePageChange:function(){this.getChapter()}}},l=o,r=(i("36b3"),i("2877")),h=Object(r["a"])(l,a,s,!1,null,"105a343c",null);e["default"]=h.exports},a38c:function(t,e,i){"use strict";var a=i("8284"),s=i.n(a);s.a},c63d:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"crumbs"},[i("el-breadcrumb",{attrs:{separator:"/"}},[i("el-breadcrumb-item",[i("i",{staticClass:"el-icon-lx-cascades"}),t._v(" 基础表格\n            ")])],1)],1),i("div",{staticClass:"container"},[i("div",{staticClass:"handle-box"},[i("el-button",{attrs:{type:"primary",icon:"el-icon-refresh"},on:{click:t.refresh}},[t._v("刷新")])],1),i("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:t.rex,border:"","header-cell-class-name":"table-header"}},[i("el-table-column",{attrs:{prop:"id",label:"ID",width:"100",align:"center"}}),i("el-table-column",{attrs:{prop:"name",label:"名称"}}),i("el-table-column",{attrs:{prop:"info",label:"介绍"}}),i("el-table-column",{attrs:{prop:"contentRex",label:"内容匹配规则"}}),i("el-table-column",{attrs:{prop:"titleRex",label:"标题匹配规则"}}),i("el-table-column",{attrs:{prop:"nextPageRex",label:"下章匹配规则"}}),i("el-table-column",{attrs:{label:"操作",width:"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(i){return t.handleEdit(e.$index,e.row)}}},[t._v("编辑")]),i("el-button",{staticClass:"red",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(i){return t.handleDelete(e.$index,e.row)}}},[t._v("删除")])]}}])})],1),i("div",{staticClass:"pagination"},[i("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next","current-page":t.query.index,"page-size":t.query.size,total:t.totalElements},on:{"update:currentPage":function(e){return t.$set(t.query,"index",e)},"update:current-page":function(e){return t.$set(t.query,"index",e)},"current-change":t.getRex}})],1)],1),i("el-dialog",{attrs:{title:"编辑",visible:t.editVisible,width:"30%"},on:{"update:visible":function(e){t.editVisible=e}}},[i("el-form",{ref:"form",attrs:{model:t.form,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"名称"}},[i("el-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),i("el-form-item",{attrs:{label:"介绍"}},[i("el-input",{model:{value:t.form.info,callback:function(e){t.$set(t.form,"info",e)},expression:"form.info"}})],1),i("el-form-item",{attrs:{label:"内容匹配规则"}},[i("el-input",{model:{value:t.form.contentRex,callback:function(e){t.$set(t.form,"contentRex",e)},expression:"form.contentRex"}})],1),i("el-form-item",{attrs:{label:"标题匹配规则"}},[i("el-input",{model:{value:t.form.titleRex,callback:function(e){t.$set(t.form,"titleRex",e)},expression:"form.titleRex"}})],1),i("el-form-item",{attrs:{label:"下章匹配规则"}},[i("el-input",{model:{value:t.form.nextPageRex,callback:function(e){t.$set(t.form,"nextPageRex",e)},expression:"form.nextPageRex"}})],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.editVisible=!1}}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:t.saveEdit}},[t._v("确 定")])],1)],1)],1)},s=[],n={name:"rexTable",data:function(){return{rex:[],delList:[],editVisible:!1,pageTotal:0,form:{},idx:-1,id:-1,query:{index:1,size:10},totalElements:0}},created:function(){this.getRex()},methods:{getRex:function(){var t=this,e={index:this.query.index-1,size:this.query.size};this.$axios.get("/admin/rex",e).then((function(e){var i=e.data;t.rex=i.content,t.totalElements=i.totalElements}))},refresh:function(){var t=this,e={index:this.query.index-1,size:this.query.size};this.$axios.get("/admin/rex",e).then((function(e){var i=e.data;t.rex=i.content,t.totalElements=i.totalElements,t.$message.success("刷新成功！")}))},handleDelete:function(t,e){var i=this;this.$confirm("确定要删除吗？","提示",{type:"warning"}).then((function(){i.$axios.delete("/admin/rex?id="+e.id).then((function(t){i.rex=t.data,i.$message.success("删除成功"),i.getRex()}))})).catch((function(){}))},handleEdit:function(t,e){this.idx=t,this.form=e,this.editVisible=!0},saveEdit:function(){var t=this;this.editVisible=!1,this.$axios.post("/admin/rex",this.form).then((function(e){t.$message.success("修改成功"),t.getRex()})).catch((function(e){t.$message.error("修改失败！")}))}}},o=n,l=(i("3fca"),i("2877")),r=Object(l["a"])(o,a,s,!1,null,"7c42e10a",null);e["default"]=r.exports},d17e:function(t,e,i){},d80d:function(t,e,i){},d862:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"flx"},[i("div",{staticClass:"block"},[i("span",{staticClass:"demonstration"}),i("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.timeValue,callback:function(e){t.timeValue=e},expression:"timeValue"}}),i("el-button",{staticClass:"query",attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.getVisit}},[t._v("查询")])],1)]),i("schart",{ref:"bar",staticClass:"schart",attrs:{canvasId:"bar",data:t.visit,type:"bar",options:{title:this.title,showValue:!0,fillColor:"rgb(45, 140, 240)",bottomPadding:30,topPadding:30}}})],1)},s=[],n=(i("f576"),i("a481"),i("3b2b"),i("6b54"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("canvas",{attrs:{id:t.canvasId}})])}),o=[],l=i("8c93"),r=i.n(l),h={data:function(){return{schart:null,opt:{}}},props:{canvasId:{type:String,default:""},type:{type:String,default:"bar"},data:{type:Array,default:[]},options:{type:Object,required:!1}},mounted:function(){this.renderChart()},methods:{renderChart:function(){this.schart=null,this.opt=this.options,this.width&&this.height||(this.opt?this.opt["autoWidth"]=!0:this.opt={autoWidth:!0}),this.schart=new r.a(this.canvasId,this.type,this.data,this.opt)}},watch:{data:function(){this.renderChart()},options:function(){this.renderChart()},type:function(){this.renderChart()}}},c=h,d=i("2877"),u=Object(d["a"])(c,n,o,!1,null,null,null),f=u.exports,m={name:"Chart",data:function(){return{visit:[],timeValue:[],bookId:null,title:""}},methods:{dateFormat:function(t,e){if(e){var i,a={"Y+":e.getFullYear().toString(),"m+":(e.getMonth()+1).toString(),"d+":e.getDate().toString(),"H+":e.getHours().toString(),"M+":e.getMinutes().toString(),"S+":e.getSeconds().toString()};for(var s in a)i=new RegExp("("+s+")").exec(t),i&&(t=t.replace(i[1],1===i[1].length?a[s]:a[s].padStart(i[1].length,"0")));return t}return null},getDate:function(t){return t=t.replace(/-/g,"/"),new Date(t)},getVisit:function(){var t=this,e="YYYY/mm/dd";if(this.timeValue[0]||(this.timeValue[0]=new Date,this.timeValue[0].setTime(this.timeValue[0].getTime()-6048e5)),this.timeValue[1]){if(this.timeValue[0].getTime()>=this.timeValue[1].getTime())return}else this.timeValue[1]=new Date;""!==this.title&&(this.title=this.dateFormat(e,this.timeValue[0])+"至"+this.dateFormat(e,this.timeValue[1])+"的访问量");var i={begin:this.dateFormat(e,this.timeValue[0]),end:this.dateFormat(e,this.timeValue[1]),bookId:this.bookId};this.$axios.get("/admin/visit",i).then((function(e){for(var i=e.data,a={},s=0;s<i.length;++s)a[i[s].date]=i[s].visit;var n=[],o=new Date;for(o.setTime(t.timeValue[0].getTime());o.getTime()<t.timeValue[1].getTime();o.setTime(o.getTime()+864e5)){var l=t.dateFormat("YYYY-mm-dd",o);n.push({value:a[l]?a[l]:0,name:l.replace(/-/g,"/")})}t.visit=n}))}},components:{Schart:f},props:["id"],mounted:function(){this.bookId=this.id,this.timeValue[0]=new Date,this.timeValue[1]=new Date,this.timeValue[0].setTime(this.timeValue[0].getTime()-6048e5),this.title="最近七天每天的用户访问量",this.getVisit()}},g=m,x=(i("ffc0"),Object(d["a"])(g,a,s,!1,null,"1885eed0",null));e["a"]=x.exports},f4c2:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"crumbs"},[i("el-breadcrumb",{attrs:{separator:"/"}},[i("el-breadcrumb-item",[i("i",{staticClass:"el-icon-lx-cascades"}),t._v(" 基础表格\n            ")])],1)],1),i("div",{staticClass:"container"},[i("div",{staticClass:"handle-box"},[i("el-button",{staticClass:"mr10",attrs:{type:"primary",icon:"el-icon-refresh"},on:{click:t.refresh}},[t._v("刷新")]),i("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"书名或作者名"},model:{value:t.findStr,callback:function(e){t.findStr=e},expression:"findStr"}}),i("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.handleSearch}},[t._v("搜索")]),i("el-button",{attrs:{type:"primary",icon:"el-icon-s-data"},on:{click:t.changeMod}},[t._v(t._s(0===t.query.mod?"全部":1===t.query.mod?"连载中":"已完结"))])],1),i("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:t.tableData,border:"","header-cell-class-name":"table-header"}},[i("el-table-column",{attrs:{prop:"id",label:"ID",width:"70",align:"center"}}),i("el-table-column",{attrs:{prop:"book.name",label:"书名"}}),i("el-table-column",{attrs:{prop:"url",label:"爬虫位置"}}),i("el-table-column",{attrs:{prop:"matchRex.name",label:"匹配规则"}}),i("el-table-column",{attrs:{label:"状态",align:"center",width:"70"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-tag",{attrs:{type:!1===e.row.finished?"success":"danger"}},[t._v(t._s(!1===e.row.finished?"连载":"完结"))])]}}])}),i("el-table-column",{attrs:{prop:"createTime",label:"开始时间"}}),i("el-table-column",{attrs:{label:"操作",width:"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(i){return t.handleEdit(e.$index,e.row)}}},[t._v("编辑")]),e.row.finished?t._e():i("el-button",{staticClass:"red",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(i){return t.handleDelete(e.$index,e.row)}}},[t._v("停更")]),e.row.finished?i("el-button",{staticClass:"green",attrs:{type:"text",icon:"el-icon-lx-global"},on:{click:function(i){return t.handleRefresh(e.$index,e.row)}}},[t._v("追更")]):t._e()]}}])})],1),i("div",{staticClass:"pagination"},[i("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next","current-page":t.query.index,"page-size":t.query.size,total:t.totalElements},on:{"update:currentPage":function(e){return t.$set(t.query,"index",e)},"update:current-page":function(e){return t.$set(t.query,"index",e)},"current-change":t.getData}})],1)],1),i("el-dialog",{attrs:{title:"编辑",visible:t.editVisible,width:"30%"},on:{"update:visible":function(e){t.editVisible=e}}},[i("el-form",{ref:"form",attrs:{model:t.form,"label-width":"70px"}},[i("el-form-item",{attrs:{label:"id"}},[i("el-input",{staticStyle:{width:"30%"},attrs:{disabled:"false"},model:{value:t.form.id,callback:function(e){t.$set(t.form,"id",e)},expression:"form.id"}}),i("el-button",{staticStyle:{"margin-left":"10%"},attrs:{type:"success"},on:{click:t.update}},[t._v("更新")])],1),i("el-form-item",{attrs:{label:"爬虫位置"}},[i("el-input",{model:{value:t.form.url,callback:function(e){t.$set(t.form,"url",e)},expression:"form.url"}})],1),i("el-form-item",{attrs:{label:"规则"}},[i("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.matchRexId,callback:function(e){t.$set(t.form,"matchRexId",e)},expression:"form.matchRexId"}},t._l(t.rex,(function(t){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),i("el-form-item",[i("el-button",{staticClass:"refresh",attrs:{type:"primary",icon:"el-icon-refresh"},on:{click:t.refresh}},[t._v("刷新")])],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.editVisible=!1}}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:t.saveEdit}},[t._v("确 定")])],1)],1)],1)},s=[],n=(i("7f7f"),{name:"spiderList",data:function(){return{tableData:[],query:{name:"",index:1,size:10,mod:0},totalElements:0,editVisible:!1,form:{id:0,url:"",matchRexId:""},rex:{},findStr:""}},created:function(){this.getData()},methods:{getData:function(){var t=this,e={name:this.query.name,index:this.query.index-1,size:this.query.size,mod:this.query.mod};this.$axios.get("/admin/spider_info",e).then((function(e){var i=e.data;t.tableData=i.content,t.totalElements=i.totalElements}))},changeMod:function(){this.query.mod=(this.query.mod+1)%3,this.getData()},refresh:function(){var t=this,e={name:this.query.name,index:this.query.index-1,size:this.query.size,mod:this.query.mod};this.$axios.get("/admin/spider_info",e).then((function(e){var i=e.data;t.tableData=i.content,t.totalElements=i.totalElements,t.$message.success("刷新成功！")}))},update:function(){var t=this;this.$confirm("确定要立刻更新吗？","提示",{type:"warning"}).then((function(){t.$axios.post("/admin/update?id="+t.form.id).then((function(e){200===e.code?(t.$message.success("操作成功"),t.getData()):t.$message.error("服务器繁忙")})).catch((function(e){t.$message.error("服务器繁忙")}))})).catch((function(){}))},handleSearch:function(){this.query.name=this.findStr,this.getData()},handleDelete:function(t,e){var i=this;this.$confirm("确定要停止吗？","提示",{type:"warning"}).then((function(){i.$axios.delete("/admin/spider_info?id="+e.id).then((function(t){200===t.code?(i.$message.success("操作成功"),i.getData()):i.$message.error("数据异常")})).catch((function(t){i.$message.error("服务器繁忙")}))})).catch((function(){}))},handleRefresh:function(t,e){var i=this;this.$confirm("确定要继续更新吗？","提示",{type:"warning"}).then((function(){var t={id:e.id,refresh:1};i.$axios.delete("/admin/spider_info",t).then((function(t){200===t.code?(i.$message.success("操作成功"),i.getData()):i.$message.error("数据异常")})).catch((function(t){i.$message.error("服务器繁忙")}))})).catch((function(){}))},handleEdit:function(t,e){this.getRex(),this.form={id:e.id,matchRexId:e.matchRex.id,url:e.url},this.editVisible=!0},saveEdit:function(){var t=this;this.$axios.put("/admin/spider_info",this.form).then((function(e){200===e.code?(t.editVisible=!1,t.getData(),t.$message.success("保存成功")):t.$message.error("数据异常")})).catch((function(e){t.$message.error("服务器繁忙")}))},getRex:function(){var t=this;this.$axios.get("/admin/rex").then((function(e){t.rex=e.data}))}}}),o=n,l=(i("a38c"),i("2877")),r=Object(l["a"])(o,a,s,!1,null,"255d84a0",null);e["default"]=r.exports},ffc0:function(t,e,i){"use strict";var a=i("d17e"),s=i.n(a);s.a}}]);