(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["dashboard"],{"1d7c":function(e,t,s){"use strict";var r=s("c840"),a=s.n(r);a.a},7159:function(e,t,s){e.exports=s.p+"img/img.146655c9.jpg"},b975:function(e,t,s){"use strict";var r=s("f9b6"),a=s.n(r);a.a},c840:function(e,t,s){},deb1:function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"crumbs"},[s("el-breadcrumb",{attrs:{separator:"/"}},[s("el-breadcrumb-item",[s("i",{staticClass:"el-icon-lx-cascades"}),e._v(" 基础表格\n            ")])],1)],1),s("div",{staticClass:"container"},[s("div",{staticClass:"handle-box"},[s("el-button",{attrs:{type:"primary",icon:"el-icon-refresh"},on:{click:e.getData}},[e._v("刷新")])],1),s("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.tableData,border:"","header-cell-class-name":"table-header"}},[s("el-table-column",{attrs:{prop:"id",label:"ID",width:"55",align:"center"}}),s("el-table-column",{attrs:{prop:"username",label:"用户名"}}),s("el-table-column",{attrs:{label:"身份",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.authorities,(function(t){return s("el-tag",{attrs:{type:"ROLE_USER"===t.name?"success":"ROLE_ROOT"===t.name?"danger":""}},[e._v(e._s(e._f("role")(t.name)))])}))}}])}),s("el-table-column",{attrs:{prop:"createTime",label:"注册时间"}}),s("el-table-column",{attrs:{label:"状态",align:"center",width:"70px"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-tag",{attrs:{type:!1===t.row.deleted?"success":"danger"}},[e._v(e._s(!1===t.row.deleted?"启用":"封停"))])]}}])}),s("el-table-column",{attrs:{label:"操作",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(s){return e.handleEdit(t.$index,t.row)}}},[e._v("修改")]),s("el-button",{staticClass:"yellow",attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(s){return e.handleRole(t.$index,t.row)}}},[e._v("权限")]),t.row.deleted&&!e.isme(t.row)?s("el-button",{staticClass:"green",attrs:{type:"text",icon:"el-icon-lx-people"},on:{click:function(s){return e.handleRefresh(t.$index,t.row)}}},[e._v("启用")]):e._e(),t.row.deleted||e.isme(t.row)?e._e():s("el-button",{staticClass:"red",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(s){return e.handleDelete(t.$index,t.row)}}},[e._v("停用")])]}}])})],1),s("div",{staticClass:"add-user"},[s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleAdd()}}},[e._v("新增用户")])],1)],1),s("el-dialog",{attrs:{title:"编辑",visible:e.editVisible,width:"30%"},on:{"update:visible":function(t){e.editVisible=t}}},[s("el-form",{ref:"form",attrs:{model:e.form,"label-width":"70px"}},[s("el-form-item",{attrs:{label:"用户名"}},[s("el-input",{model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),s("el-form-item",{attrs:{label:"密码"}},[s("el-input",{attrs:{type:"password"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),s("el-form-item",{attrs:{label:"确认密码"}},[s("el-input",{attrs:{type:"password"},model:{value:e.confirm,callback:function(t){e.confirm=t},expression:"confirm"}})],1)],1),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.editVisible=!1}}},[e._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:e.saveEdit}},[e._v("确 定")])],1)],1),s("el-dialog",{attrs:{title:"新增用户",visible:e.addVisible,width:"30%"},on:{"update:visible":function(t){e.addVisible=t}}},[s("el-form",{ref:"form",attrs:{model:e.form,"label-width":"70px"}},[s("el-form-item",{attrs:{label:"用户名"}},[s("el-input",{model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),s("el-form-item",{attrs:{label:"密码"}},[s("el-input",{attrs:{type:"password"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),s("el-form-item",{attrs:{label:"确认密码"}},[s("el-input",{attrs:{type:"password"},model:{value:e.confirm,callback:function(t){e.confirm=t},expression:"confirm"}})],1)],1),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.addVisible=!1}}},[e._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:e.addUser}},[e._v("确 定")])],1)],1),s("el-dialog",{attrs:{title:"权限",visible:e.roleVisible,width:"30%"},on:{"update:visible":function(t){e.roleVisible=t}}},[s("el-form",{ref:"form",attrs:{model:e.form,"label-width":"70px"}},[s("el-form-item",{attrs:{label:"用户名"}},[s("el-input",{attrs:{disabled:"false"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),s("el-form-item",{attrs:{label:"新增角色"}},[s("el-select",{attrs:{placeholder:"请选择"},model:{value:e.roleId,callback:function(t){e.roleId=t},expression:"roleId"}},e._l(e.roleData,(function(t){return e.noRole(t.name,e.form.authorities)?s("el-option",{key:t.id,attrs:{label:e._f("role")(t.name),value:t.id}}):e._e()})),1),s("el-button",{staticClass:"refresh",attrs:{type:"primary",icon:"el-icon-refresh"},on:{click:e.getRoles}},[e._v("刷新")])],1)],1),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.roleVisible=!1}}},[e._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:e.saveRole}},[e._v("确 定")])],1)],1)],1)},a=[],o=(s("7f7f"),{name:"userList",data:function(){return{tableData:[],roleData:[],editVisible:!1,addVisible:!1,roleVisible:!1,roleId:null,form:{},confirm:""}},created:function(){this.getData(),this.getRoles()},filters:{role:function(e){return"ROLE_USER"===e?"管理员":"ROLE_ROOT"===e?"用户管理员":""}},methods:{getRoles:function(){var e=this;this.$axios.get("/root/role").then((function(t){e.roleData=t.data.data}))},getData:function(){var e=this;this.$axios.get("/root/user").then((function(t){e.tableData=t.data.data}))},isme:function(e){return JSON.parse(localStorage.user_info).user_name===e.username},handleDelete:function(e,t){var s=this;this.$confirm("确定要停用吗？","提示",{type:"warning"}).then((function(){s.$axios.delete("/root/user?id="+t.id).then((function(e){s.$message.success("停用成功"),s.getData()})).catch((function(e){s.$message.error("停用失败")}))})).catch((function(){}))},handleRefresh:function(e,t){var s=this,r={id:t.id};this.$axios.post("/root/user",r).then((function(e){s.$message.success("启用成功"),s.getData()})).catch((function(e){s.$message.error("启用失败")}))},handleEdit:function(e,t){this.idx=e,this.form=t,this.editVisible=!0},saveEdit:function(){var e=this;if(this.form.password===this.confirm||!this.form.password&&!this.confirm){var t={id:this.form.id,username:this.form.username,password:this.form.password};this.$axios.put("/root/user",t).then((function(t){200===t.data.code?(e.editVisible=!1,e.$message.success("修改成功")):e.$message.error(t.data.message)})).catch((function(t){e.$message.error("服务器繁忙")}))}else this.$message.error("两次密码不一致")},handleAdd:function(){this.form={},this.addVisible=!0},addUser:function(){var e=this;if(this.form.password&&this.confirm&&this.form.password===this.confirm){var t={username:this.form.username,password:this.form.password};this.$axios.post("/root/register",t).then((function(t){200===t.data.code?(e.$message.success("新增用户成功"),e.getData(),e.addVisible=!1):e.$message.error(t.data.message)})).catch((function(t){e.$message.error("服务器繁忙")}))}else this.$message.error("两次密码不一致")},handleRole:function(e,t){this.idx=e,this.roleId="",this.form=t,this.roleVisible=!0},saveRole:function(){var e=this,t={userId:this.form.id,roleId:this.roleId};this.$axios.put("/root/role",t).then((function(t){200===t.data.code?(e.roleVisible=!1,e.$message.success("权限修改成功"),e.getData()):e.$message.error(t.data.message)})).catch((function(t){e.$message.error("服务器繁忙")}))},noRole:function(e,t){for(var s in t)if(t[s].name===e)return!1;return!0}}}),i=o,n=(s("1d7c"),s("2877")),l=Object(n["a"])(i,r,a,!1,null,"d663abe8",null);t["default"]=l.exports},e2ad:function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:8}},[r("el-card",{staticClass:"mgb20",staticStyle:{height:"252px"},attrs:{shadow:"hover"}},[r("div",{staticClass:"user-info"},[r("img",{staticClass:"user-avator",attrs:{src:s("7159"),alt:""}}),r("div",{staticClass:"user-info-cont"},[r("div",{staticClass:"user-info-name"},[e._v(e._s(e.username))]),r("div",[e._v(e._s(e.role))])])]),r("div",{staticClass:"user-info-list"},[e._v("欢迎"+e._s(e.username)+"回来！")])])],1)],1)],1)},a=[],o={name:"dashboard",data:function(){return{user:{}}},computed:{role:function(){var e="普通用户";if(this.user.authorities){var t=this.user.authorities;for(var s in t)"ROLE_USER"===t[s]?"超级管理员"!==e&&(e="管理员"):"ROLE_ROOT"===t[s]&&(e="超级管理员")}return e},username:function(){return this.user.user_name?this.user.user_name:"---"}},created:function(){this.user=JSON.parse(localStorage.user_info)},methods:{}},i=o,n=(s("b975"),s("2877")),l=Object(n["a"])(i,r,a,!1,null,"41560470",null);t["default"]=l.exports},f9b6:function(e,t,s){}}]);
//# sourceMappingURL=dashboard.66d0ef57.js.map