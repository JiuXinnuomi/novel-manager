(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["dashboard"],{"1d7c":function(t,i,e){"use strict";var s=e("c840"),a=e.n(s);a.a},"2f6a":function(t,i,e){"use strict";var s=e("e4b3"),a=e.n(s);a.a},7159:function(t,i,e){t.exports=e.p+"img/img.146655c9.jpg"},"7ed4":function(t,i,e){"use strict";var s=e("2b0e"),a=new s["default"];i["a"]=a},"8c93":function(t,i,e){var s;
/*!
 * sChart JavaScript Library v2.0.1
 * http://blog.gdfengshuo.com/example/sChart/ | Released under the MIT license
 * Date: 2018-04-16T18:59Z
 */(function(a,o){s=function(){return o(a)}.call(i,e,i,t),void 0===s||(t.exports=s)})(this,(function(t){"use strict";function i(t,i,e,s){this.canvas=document.getElementById(t),this.ctx=this.canvas.getContext("2d"),this.dpi=window.devicePixelRatio||1,this.type=i,this.data=e,this.dataLength=this.data.length,this.showValue=!0,this.autoWidth=!1,this.width=this.canvas.width*this.dpi,this.height=this.canvas.height*this.dpi,this.topPadding=50*this.dpi,this.leftPadding=50*this.dpi,this.rightPadding=0*this.dpi,this.bottomPadding=50*this.dpi,this.yEqual=5,this.yLength=0,this.xLength=0,this.yFictitious=0,this.yRatio=0,this.bgColor="#ffffff",this.fillColor="#1E9FFF",this.axisColor="#666666",this.contentColor="#eeeeee",this.titleColor="#000000",this.title="",this.titlePosition="top",this.radius=100*this.dpi,this.innerRadius=70*this.dpi,this.colorList=["#1E9FFF","#13CE66","#F7BA2A","#FF4949","#72f6ff","#199475","#e08031","#726dd1"],this.legendColor="#000000",this.legendTop=40*this.dpi,this.totalValue=this.getTotalValue(),this.init(s)}return i.prototype={init:function(t){if(0===this.dataLength)return!1;if(t){var i=["topPadding","leftPadding","rightPadding","bottomPadding","radius","innerRadius","legendTop"];for(var e in t)"colorList"===e&&Array.isArray(t[e])?this[e]=t[e].concat(this[e]):i.indexOf(e)>-1?this[e]=t[e]*this.dpi:this[e]=t[e]}t.autoWidth?(this.width=this.canvas.width=this.canvas.parentNode.offsetWidth*this.dpi,this.height=this.canvas.height=this.canvas.parentNode.offsetHeight*this.dpi,this.canvas.setAttribute("style","width:"+this.canvas.parentNode.offsetWidth+"px;height:"+this.canvas.parentNode.offsetHeight+"px;")):(this.canvas.setAttribute("style","width:"+this.canvas.width+"px;height:"+this.canvas.height+"px;"),this.canvas.width*=this.dpi,this.canvas.height*=this.dpi),"bar"===this.type||"line"===this.type?(this.yLength=Math.floor((this.height-this.topPadding-this.bottomPadding-10)/this.yEqual),this.xLength=Math.floor((this.width-this.leftPadding-this.rightPadding-10)/this.dataLength),this.yFictitious=this.getYFictitious(this.data),this.yRatio=this.yLength/this.yFictitious,this.drawBarUpdate()):this.drawPieUpdate()},drawBarUpdate:function(){this.ctx.fillStyle=this.bgColor,this.ctx.fillRect(0,0,this.width,this.height),this.drawAxis(),this.drawPoint(),this.drawTitle(),this.drawBarChart()},drawPieUpdate:function(){this.ctx.fillStyle=this.bgColor,this.ctx.fillRect(0,0,this.width,this.height),this.drawLegend(),this.drawTitle(),this.drawPieChart()},drawBarChart:function(){this.ctx.fillStyle=this.fillColor,this.ctx.strokeStyle=this.fillColor;for(var t=0;t<this.dataLength;t++)this.data[t].left=this.leftPadding+this.xLength*(t+.25),this.data[t].top=this.height-this.bottomPadding-this.data[t].value*this.yRatio,this.data[t].right=this.leftPadding+this.xLength*(t+.75),this.data[t].bottom=this.height-this.bottomPadding,"line"===this.type?(this.ctx.beginPath(),this.ctx.arc(this.data[t].left+this.xLength/4,this.data[t].top,2,0,2*Math.PI,!0),this.ctx.fill(),0!==t&&(this.ctx.moveTo(this.data[t].left+this.xLength/4,this.data[t].top),this.ctx.lineTo(this.data[t-1].left+this.xLength/4,this.data[t-1].top)),this.ctx.stroke()):"bar"===this.type&&this.ctx.fillRect(this.data[t].left,this.data[t].top,this.data[t].right-this.data[t].left,this.data[t].bottom-this.data[t].top),this.showValue&&(this.ctx.font=12*this.dpi+"px Arial",this.ctx.fillText(this.data[t].value,this.data[t].left+this.xLength/4,this.data[t].top-5))},drawPieChart:function(){for(var t=this.width/2,i=this.height/2,e=0,s=0,a=0;a<this.dataLength;a++)this.ctx.beginPath(),this.ctx.fillStyle=this.colorList[a],this.ctx.moveTo(t,i),this.data[a].start=0===a?-Math.PI/2:this.data[a-1].end,this.data[a].end=this.data[a].start+this.data[a].value/this.totalValue*2*Math.PI,this.ctx.arc(t,i,this.radius,this.data[a].start,this.data[a].end),this.ctx.closePath(),this.ctx.fill(),this.data[a].middle=(this.data[a].start+this.data[a].end)/2,e=Math.ceil(Math.abs(this.radius*Math.cos(this.data[a].middle))),s=Math.floor(Math.abs(this.radius*Math.sin(this.data[a].middle))),this.ctx.strokeStyle=this.colorList[a],this.showValue&&(this.data[a].middle<=0?(this.ctx.textAlign="left",this.ctx.moveTo(t+e,i-s),this.ctx.lineTo(t+e+10,i-s-10),this.ctx.moveTo(t+e+10,i-s-10),this.ctx.lineTo(t+e+this.radius/2,i-s-10),this.ctx.stroke(),this.ctx.fillText(this.data[a].value,t+e+5+this.radius/2,i-s-5)):this.data[a].middle>0&&this.data[a].middle<=Math.PI/2?(this.ctx.textAlign="left",this.ctx.moveTo(t+e,i+s),this.ctx.lineTo(t+e+10,i+s+10),this.ctx.moveTo(t+e+10,i+s+10),this.ctx.lineTo(t+e+this.radius/2,i+s+10),this.ctx.stroke(),this.ctx.fillText(this.data[a].value,t+e+5+this.radius/2,i+s+15)):this.data[a].middle>Math.PI/2&&this.data[a].middle<Math.PI?(this.ctx.textAlign="right",this.ctx.moveTo(t-e,i+s),this.ctx.lineTo(t-e-10,i+s+10),this.ctx.moveTo(t-e-10,i+s+10),this.ctx.lineTo(t-e-this.radius/2,i+s+10),this.ctx.stroke(),this.ctx.fillText(this.data[a].value,t-e-5-this.radius/2,i+s+15)):(this.ctx.textAlign="right",this.ctx.moveTo(t-e,i-s),this.ctx.lineTo(t-e-10,i-s-10),this.ctx.moveTo(t-e-10,i-s-10),this.ctx.lineTo(t-e-this.radius/2,i-s-10),this.ctx.stroke(),this.ctx.fillText(this.data[a].value,t-e-5-this.radius/2,i-s-5)));"ring"===this.type&&(this.ctx.beginPath(),this.ctx.fillStyle=this.bgColor,this.ctx.arc(t,i,this.innerRadius,0,2*Math.PI),this.ctx.fill())},drawAxis:function(){this.ctx.beginPath(),this.ctx.strokeStyle=this.axisColor,this.ctx.moveTo(this.leftPadding+.5,this.height-this.bottomPadding+.5),this.ctx.lineTo(this.leftPadding+.5,this.topPadding+.5),this.ctx.moveTo(this.leftPadding+.5,this.height-this.bottomPadding+.5),this.ctx.lineTo(this.width-this.rightPadding-.5,this.height-this.bottomPadding+.5),this.ctx.stroke()},drawPoint:function(){this.ctx.beginPath(),this.ctx.font=12*this.dpi+"px Microsoft YaHei",this.ctx.textAlign="center",this.ctx.fillStyle=this.axisColor;for(var t=0;t<this.dataLength;t++){var i=this.data[t].name,e=this.xLength*(t+1);this.ctx.moveTo(this.leftPadding+e+.5,this.height-this.bottomPadding+.5),this.ctx.lineTo(this.leftPadding+e+.5,this.height-this.bottomPadding+5.5),this.ctx.fillText(i,this.leftPadding+e-this.xLength/2,this.height-this.bottomPadding+15*this.dpi)}this.ctx.stroke(),this.ctx.beginPath(),this.ctx.font=12*this.dpi+"px Microsoft YaHei",this.ctx.textAlign="right",this.ctx.fillStyle=this.axisColor,this.ctx.moveTo(this.leftPadding+.5,this.height-this.bottomPadding+.5),this.ctx.lineTo(this.leftPadding-4.5,this.height-this.bottomPadding+.5),this.ctx.fillText(0,this.leftPadding-10,this.height-this.bottomPadding+5);for(t=0;t<this.yEqual;t++){var s=this.yFictitious*(t+1),a=this.yLength*(t+1);this.ctx.beginPath(),this.ctx.strokeStyle=this.axisColor,this.ctx.moveTo(this.leftPadding+.5,this.height-this.bottomPadding-a+.5),this.ctx.lineTo(this.leftPadding-4.5,this.height-this.bottomPadding-a+.5),this.ctx.stroke(),this.ctx.fillText(s,this.leftPadding-10,this.height-this.bottomPadding-a+5),this.ctx.beginPath(),this.ctx.strokeStyle=this.contentColor,this.ctx.moveTo(this.leftPadding+.5,this.height-this.bottomPadding-a+.5),this.ctx.lineTo(this.width-this.rightPadding-.5,this.height-this.bottomPadding-a+.5),this.ctx.stroke()}},drawTitle:function(){this.title&&(this.ctx.beginPath(),this.ctx.textAlign="center",this.ctx.fillStyle=this.titleColor,this.ctx.font=16*this.dpi+"px Microsoft YaHei","bottom"===this.titlePosition&&this.bottomPadding>=40?this.ctx.fillText(this.title,this.width/2,this.height-5):this.ctx.fillText(this.title,this.width/2,this.topPadding/2+5))},drawLegend:function(){for(var t=0;t<this.dataLength;t++)this.ctx.fillStyle=this.colorList[t],this.ctx.fillRect(10,this.legendTop+15*t*this.dpi,20,11),this.ctx.fillStyle=this.legendColor,this.ctx.font=12*this.dpi+"px Microsoft YaHei",this.ctx.textAlign="left",this.ctx.fillText(this.data[t].name,35,this.legendTop+10+15*t*this.dpi)},getYFictitious:function(t){var i=t.slice(0);i.sort((function(t,i){return-(t.value-i.value)}));var e=Math.ceil(i[0].value/this.yEqual),s=e.toString().length-1;return s=s>2?2:s,Math.ceil(e/Math.pow(10,s))*Math.pow(10,s)},getTotalValue:function(){for(var t=0,i=0;i<this.dataLength;i++)t+=this.data[i].value;return t}},i}))},c840:function(t,i,e){},deb1:function(t,i,e){"use strict";e.r(i);var s=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",[e("div",{staticClass:"crumbs"},[e("el-breadcrumb",{attrs:{separator:"/"}},[e("el-breadcrumb-item",[e("i",{staticClass:"el-icon-lx-cascades"}),t._v(" 基础表格\n            ")])],1)],1),e("div",{staticClass:"container"},[e("div",{staticClass:"handle-box"},[e("el-button",{attrs:{type:"primary",icon:"el-icon-refresh"},on:{click:t.getData}},[t._v("刷新")])],1),e("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:t.tableData,border:"","header-cell-class-name":"table-header"}},[e("el-table-column",{attrs:{prop:"id",label:"ID",width:"55",align:"center"}}),e("el-table-column",{attrs:{prop:"username",label:"用户名"}}),e("el-table-column",{attrs:{label:"身份",align:"center"},scopedSlots:t._u([{key:"default",fn:function(i){return t._l(i.row.authorities,(function(i){return e("el-tag",{attrs:{type:"ROLE_USER"===i.name?"success":"ROLE_ROOT"===i.name?"danger":""}},[t._v(t._s(t._f("role")(i.name)))])}))}}])}),e("el-table-column",{attrs:{prop:"createTime",label:"注册时间"}}),e("el-table-column",{attrs:{label:"状态",align:"center",width:"70px"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("el-tag",{attrs:{type:!1===i.row.deleted?"success":"danger"}},[t._v(t._s(!1===i.row.deleted?"启用":"封停"))])]}}])}),e("el-table-column",{attrs:{label:"操作",width:"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(e){return t.handleEdit(i.$index,i.row)}}},[t._v("修改")]),e("el-button",{staticClass:"yellow",attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(e){return t.handleRole(i.$index,i.row)}}},[t._v("权限")]),i.row.deleted&&!t.isme(i.row)?e("el-button",{staticClass:"green",attrs:{type:"text",icon:"el-icon-lx-people"},on:{click:function(e){return t.handleRefresh(i.$index,i.row)}}},[t._v("启用")]):t._e(),i.row.deleted||t.isme(i.row)?t._e():e("el-button",{staticClass:"red",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(e){return t.handleDelete(i.$index,i.row)}}},[t._v("停用")])]}}])})],1),e("div",{staticClass:"add-user"},[e("el-button",{attrs:{type:"primary"},on:{click:function(i){return t.handleAdd()}}},[t._v("新增用户")])],1)],1),e("el-dialog",{attrs:{title:"编辑",visible:t.editVisible,width:"30%"},on:{"update:visible":function(i){t.editVisible=i}}},[e("el-form",{ref:"form",attrs:{model:t.form,"label-width":"70px"}},[e("el-form-item",{attrs:{label:"用户名"}},[e("el-input",{model:{value:t.form.username,callback:function(i){t.$set(t.form,"username",i)},expression:"form.username"}})],1),e("el-form-item",{attrs:{label:"密码"}},[e("el-input",{attrs:{type:"password"},model:{value:t.form.password,callback:function(i){t.$set(t.form,"password",i)},expression:"form.password"}})],1),e("el-form-item",{attrs:{label:"确认密码"}},[e("el-input",{attrs:{type:"password"},model:{value:t.confirm,callback:function(i){t.confirm=i},expression:"confirm"}})],1)],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(i){t.editVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.saveEdit}},[t._v("确 定")])],1)],1),e("el-dialog",{attrs:{title:"新增用户",visible:t.addVisible,width:"30%"},on:{"update:visible":function(i){t.addVisible=i}}},[e("el-form",{ref:"form",attrs:{model:t.form,"label-width":"70px"}},[e("el-form-item",{attrs:{label:"用户名"}},[e("el-input",{model:{value:t.form.username,callback:function(i){t.$set(t.form,"username",i)},expression:"form.username"}})],1),e("el-form-item",{attrs:{label:"密码"}},[e("el-input",{attrs:{type:"password"},model:{value:t.form.password,callback:function(i){t.$set(t.form,"password",i)},expression:"form.password"}})],1),e("el-form-item",{attrs:{label:"确认密码"}},[e("el-input",{attrs:{type:"password"},model:{value:t.confirm,callback:function(i){t.confirm=i},expression:"confirm"}})],1)],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(i){t.addVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.addUser}},[t._v("确 定")])],1)],1),e("el-dialog",{attrs:{title:"权限",visible:t.roleVisible,width:"30%"},on:{"update:visible":function(i){t.roleVisible=i}}},[e("el-form",{ref:"form",attrs:{model:t.form,"label-width":"70px"}},[e("el-form-item",{attrs:{label:"用户名"}},[e("el-input",{attrs:{disabled:"false"},model:{value:t.form.username,callback:function(i){t.$set(t.form,"username",i)},expression:"form.username"}})],1),e("el-form-item",{attrs:{label:"新增角色"}},[e("el-select",{attrs:{placeholder:"请选择"},model:{value:t.roleId,callback:function(i){t.roleId=i},expression:"roleId"}},t._l(t.roleData,(function(i){return t.noRole(i.name,t.form.authorities)?e("el-option",{key:i.id,attrs:{label:t._f("role")(i.name),value:i.id}}):t._e()})),1),e("el-button",{staticClass:"refresh",attrs:{type:"primary",icon:"el-icon-refresh"},on:{click:t.getRoles}},[t._v("刷新")])],1)],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(i){t.roleVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.saveRole}},[t._v("确 定")])],1)],1)],1)},a=[],o=(e("7f7f"),{name:"userList",data:function(){return{tableData:[],roleData:[],editVisible:!1,addVisible:!1,roleVisible:!1,roleId:null,form:{},confirm:""}},created:function(){this.getData(),this.getRoles()},filters:{role:function(t){return"ROLE_USER"===t?"管理员":"ROLE_ROOT"===t?"用户管理员":""}},methods:{getRoles:function(){var t=this;this.$axios.get("/root/role").then((function(i){t.roleData=i.data.data}))},getData:function(){var t=this;this.$axios.get("/root/user").then((function(i){t.tableData=i.data.data}))},isme:function(t){return JSON.parse(localStorage.user_info).user_name===t.username},handleDelete:function(t,i){var e=this;this.$confirm("确定要停用吗？","提示",{type:"warning"}).then((function(){e.$axios.delete("/root/user?id="+i.id).then((function(t){e.$message.success("停用成功"),e.getData()})).catch((function(t){e.$message.error("停用失败")}))})).catch((function(){}))},handleRefresh:function(t,i){var e=this,s={id:i.id};this.$axios.post("/root/user",s).then((function(t){e.$message.success("启用成功"),e.getData()})).catch((function(t){e.$message.error("启用失败")}))},handleEdit:function(t,i){this.idx=t,this.form=i,this.editVisible=!0},saveEdit:function(){var t=this;if(this.form.password===this.confirm||!this.form.password&&!this.confirm){var i={id:this.form.id,username:this.form.username,password:this.form.password};this.$axios.put("/root/user",i).then((function(i){200===i.data.code?(t.editVisible=!1,t.$message.success("修改成功")):t.$message.error(i.data.message)})).catch((function(i){t.$message.error("服务器繁忙")}))}else this.$message.error("两次密码不一致")},handleAdd:function(){this.form={},this.addVisible=!0},addUser:function(){var t=this;if(this.form.password&&this.confirm&&this.form.password===this.confirm){var i={username:this.form.username,password:this.form.password};this.$axios.post("/root/register",i).then((function(i){200===i.data.code?(t.$message.success("新增用户成功"),t.getData(),t.addVisible=!1):t.$message.error(i.data.message)})).catch((function(i){t.$message.error("服务器繁忙")}))}else this.$message.error("两次密码不一致")},handleRole:function(t,i){this.idx=t,this.roleId="",this.form=i,this.roleVisible=!0},saveRole:function(){var t=this,i={userId:this.form.id,roleId:this.roleId};this.$axios.put("/root/role",i).then((function(i){200===i.data.code?(t.roleVisible=!1,t.$message.success("权限修改成功"),t.getData()):t.$message.error(i.data.message)})).catch((function(i){t.$message.error("服务器繁忙")}))},noRole:function(t,i){for(var e in i)if(i[e].name===t)return!1;return!0}}}),h=o,r=(e("1d7c"),e("2877")),n=Object(r["a"])(h,s,a,!1,null,"d663abe8",null);i["default"]=n.exports},e2ad:function(t,i,e){"use strict";e.r(i);var s=function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",[s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:8}},[s("el-card",{staticClass:"mgb20",staticStyle:{height:"252px"},attrs:{shadow:"hover"}},[s("div",{staticClass:"user-info"},[s("img",{staticClass:"user-avator",attrs:{src:e("7159"),alt:""}}),s("div",{staticClass:"user-info-cont"},[s("div",{staticClass:"user-info-name"},[t._v(t._s(t.username))]),s("div",[t._v(t._s(t.role))])])]),s("div",{staticClass:"user-info-list"},[t._v("欢迎"+t._s(t.username)+"回来！")])])],1)],1)],1)},a=[],o=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",[e("canvas",{attrs:{id:t.canvasId}})])},h=[],r=e("8c93"),n=e.n(r),l={data:function(){return{schart:null,opt:{}}},props:{canvasId:{type:String,default:""},type:{type:String,default:"bar"},data:{type:Array,default:[]},options:{type:Object,required:!1}},mounted:function(){this.renderChart()},methods:{renderChart:function(){this.schart=null,this.opt=this.options,this.width&&this.height||(this.opt?this.opt["autoWidth"]=!0:this.opt={autoWidth:!0}),this.schart=new n.a(this.canvasId,this.type,this.data,this.opt)}},watch:{data:function(){this.renderChart()},options:function(){this.renderChart()},type:function(){this.renderChart()}}},d=l,c=e("2877"),f=Object(c["a"])(d,o,h,!1,null,null,null),u=(f.exports,e("7ed4"),{name:"dashboard",data:function(){return{user:{}}},computed:{role:function(){var t="普通用户";if(this.user.authorities){var i=this.user.authorities;for(var e in i)"ROLE_USER"===i[e]?"超级管理员"!==t&&(t="管理员"):"ROLE_ROOT"===i[e]&&(t="超级管理员")}return t},username:function(){return this.user.user_name?this.user.user_name:"---"}},created:function(){this.user=JSON.parse(localStorage.user_info)},methods:{}}),m=u,g=(e("2f6a"),Object(c["a"])(m,s,a,!1,null,"1c96da46",null));i["default"]=g.exports},e4b3:function(t,i,e){}}]);
//# sourceMappingURL=dashboard.f08ddb8f.js.map